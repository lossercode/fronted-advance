<section id="factory" class="mb-16 scroll-mt-20">
    <h2 class="text-3xl font-bold mb-6 text-gray-800 border-b-4 border-blue-500 pb-2 inline-block">
        å·¥å‚æ¨¡å¼ (Factory Pattern)
    </h2>
    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
        <h3 class="text-xl font-semibold mb-4 text-gray-800">ğŸ“Œ æ¦‚å¿µ</h3>
        <p class="text-gray-700 mb-4">
            å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§åˆ›å»ºå¯¹è±¡çš„æ–¹å¼ï¼Œæ— éœ€æŒ‡å®šå…·ä½“çš„ç±»ã€‚é€šè¿‡å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡ï¼Œå°†å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨åˆ†ç¦»ã€‚
        </p>

        <h3 class="text-xl font-semibold mb-4 text-gray-800">ğŸ’» ä»£ç ç¤ºä¾‹</h3>
        <div class="bg-gray-900 rounded-lg overflow-hidden">
            <pre class="line-numbers"><code class="language-javascript">// å·¥å‚æ¨¡å¼å®ç°
class Button {
    constructor(type) {
        this.type = type;
    }
    render() {
        return `<button class="${this.type}">æŒ‰é’®</button>`;
    }
}

class Input {
    constructor(type) {
        this.type = type;
    }
    render() {
        return `<input type="${this.type}" />`;
    }
}

// å·¥å‚ç±»
class ElementFactory {
    static createElement(elementType, type) {
        switch(elementType) {
            case 'button':
                return new Button(type);
            case 'input':
                return new Input(type);
            default:
                throw new Error('æœªçŸ¥çš„å…ƒç´ ç±»å‹');
        }
    }
}

// ä½¿ç”¨ç¤ºä¾‹
const button = ElementFactory.createElement('button', 'primary');
const input = ElementFactory.createElement('input', 'text');

console.log(button.render()); // <button class="primary">æŒ‰é’®</button>
console.log(input.render());  // <input type="text" /></code></pre>
        </div>

        <h3 class="text-xl font-semibold mb-4 mt-6 text-gray-800">âœ… åº”ç”¨åœºæ™¯</h3>
        <ul class="list-disc list-inside space-y-2 text-gray-700">
            <li>åˆ›å»ºå¤æ‚å¯¹è±¡æ—¶éšè—åˆ›å»ºé€»è¾‘</li>
            <li>æ ¹æ®ä¸åŒæ¡ä»¶åˆ›å»ºä¸åŒç±»å‹çš„å¯¹è±¡</li>
            <li>UIç»„ä»¶åº“çš„ç»„ä»¶åˆ›å»º</li>
            <li>æ•°æ®åº“è¿æ¥æ± </li>
        </ul>

        <h3 class="text-xl font-semibold mb-4 mt-6 text-gray-800">ğŸ¯ å®æˆ˜æ¡ˆä¾‹</h3>
        <div class="bg-blue-50 border-l-4 border-blue-500 p-4 rounded mb-6">
            <p class="text-gray-700 mb-2">
                <strong>æ¡ˆä¾‹ï¼šè¡¨å•å…ƒç´ ç”Ÿæˆå™¨</strong>
            </p>
            <p class="text-gray-600">
                åœ¨å®é™…é¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å·¥å‚æ¨¡å¼æ¥åŠ¨æ€ç”Ÿæˆä¸åŒç±»å‹çš„è¡¨å•å…ƒç´ ï¼Œæ ¹æ®é…ç½®æ•°æ®è‡ªåŠ¨åˆ›å»ºè¾“å…¥æ¡†ã€ä¸‹æ‹‰æ¡†ã€å•é€‰æ¡†ç­‰ç»„ä»¶ã€‚
            </p>
        </div>

        <!-- å®æˆ˜ä»£ç ç¤ºä¾‹ -->
        <div class="bg-gray-900 rounded-lg overflow-hidden mb-6">
            <pre class="line-numbers"><code class="language-javascript">// è¡¨å•å…ƒç´ åŸºç±»
class FormElement {
    constructor(config) {
        this.label = config.label;
        this.name = config.name;
        this.required = config.required || false;
    }

    render() {
        throw new Error('å­ç±»å¿…é¡»å®ç° render æ–¹æ³•');
    }
}

// æ–‡æœ¬è¾“å…¥æ¡†
class TextInput extends FormElement {
    constructor(config) {
        super(config);
        this.placeholder = config.placeholder || '';
    }

    render() {
        return `
            <div class="form-group">
                <label>${this.label}${this.required ? ' *' : ''}</label>
                <input type="text"
                       name="${this.name}"
                       placeholder="${this.placeholder}"
                       ${this.required ? 'required' : ''} />
            </div>
        `;
    }
}

// ä¸‹æ‹‰é€‰æ‹©æ¡†
class SelectInput extends FormElement {
    constructor(config) {
        super(config);
        this.options = config.options || [];
    }

    render() {
        const optionsHtml = this.options
            .map(opt => `<option value="${opt.value}">${opt.label}</option>`)
            .join('');

        return `
            <div class="form-group">
                <label>${this.label}${this.required ? ' *' : ''}</label>
                <select name="${this.name}" ${this.required ? 'required' : ''}>
                    <option value="">è¯·é€‰æ‹©</option>
                    ${optionsHtml}
                </select>
            </div>
        `;
    }
}

// å•é€‰æŒ‰é’®ç»„
class RadioInput extends FormElement {
    constructor(config) {
        super(config);
        this.options = config.options || [];
    }

    render() {
        const radiosHtml = this.options
            .map(opt => `
                <label class="radio-label">
                    <input type="radio" name="${this.name}" value="${opt.value}" />
                    ${opt.label}
                </label>
            `).join('');

        return `
            <div class="form-group">
                <label>${this.label}${this.required ? ' *' : ''}</label>
                <div class="radio-group">
                    ${radiosHtml}
                </div>
            </div>
        `;
    }
}

// å¤šè¡Œæ–‡æœ¬æ¡†
class TextareaInput extends FormElement {
    constructor(config) {
        super(config);
        this.rows = config.rows || 4;
        this.placeholder = config.placeholder || '';
    }

    render() {
        return `
            <div class="form-group">
                <label>${this.label}${this.required ? ' *' : ''}</label>
                <textarea name="${this.name}"
                          rows="${this.rows}"
                          placeholder="${this.placeholder}"
                          ${this.required ? 'required' : ''}></textarea>
            </div>
        `;
    }
}

// è¡¨å•å…ƒç´ å·¥å‚
class FormElementFactory {
    static createElement(type, config) {
        switch(type) {
            case 'text':
                return new TextInput(config);
            case 'select':
                return new SelectInput(config);
            case 'radio':
                return new RadioInput(config);
            case 'textarea':
                return new TextareaInput(config);
            default:
                throw new Error(`ä¸æ”¯æŒçš„è¡¨å•å…ƒç´ ç±»å‹: ${type}`);
        }
    }

    // æ‰¹é‡åˆ›å»ºè¡¨å•å…ƒç´ 
    static createForm(formConfig) {
        return formConfig.map(item =>
            this.createElement(item.type, item.config)
        );
    }
}

// ä½¿ç”¨ç¤ºä¾‹ï¼šæ ¹æ®é…ç½®ç”Ÿæˆè¡¨å•
const formConfig = [
    {
        type: 'text',
        config: {
            label: 'ç”¨æˆ·å',
            name: 'username',
            placeholder: 'è¯·è¾“å…¥ç”¨æˆ·å',
            required: true
        }
    },
    {
        type: 'select',
        config: {
            label: 'æ‰€åœ¨åŸå¸‚',
            name: 'city',
            required: true,
            options: [
                { value: 'beijing', label: 'åŒ—äº¬' },
                { value: 'shanghai', label: 'ä¸Šæµ·' },
                { value: 'guangzhou', label: 'å¹¿å·' }
            ]
        }
    },
    {
        type: 'radio',
        config: {
            label: 'æ€§åˆ«',
            name: 'gender',
            required: true,
            options: [
                { value: 'male', label: 'ç”·' },
                { value: 'female', label: 'å¥³' }
            ]
        }
    },
    {
        type: 'textarea',
        config: {
            label: 'ä¸ªäººç®€ä»‹',
            name: 'bio',
            placeholder: 'è¯·è¾“å…¥ä¸ªäººç®€ä»‹',
            rows: 5
        }
    }
];

// ç”Ÿæˆè¡¨å•
const formElements = FormElementFactory.createForm(formConfig);
const formHtml = formElements.map(element => element.render()).join('');
console.log(formHtml);</code></pre>
        </div>

        <!-- å¯äº¤äº’æ¼”ç¤º -->
        <div class="bg-gradient-to-r from-purple-50 to-pink-50 rounded-xl p-6">
            <h4 class="text-lg font-semibold mb-4 text-gray-800">ğŸ® äº¤äº’å¼æ¼”ç¤º</h4>
            <p class="text-gray-600 mb-4">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹å·¥å‚æ¨¡å¼åŠ¨æ€ç”Ÿæˆçš„è¡¨å•ï¼š</p>

            <button onclick="generateDemoForm()" class="px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200 mb-4">
                ç”Ÿæˆè¡¨å•
            </button>

            <div id="formDemo" class="bg-white rounded-lg p-6 shadow-md" style="display: none;">
                <!-- åŠ¨æ€ç”Ÿæˆçš„è¡¨å•å°†æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
            </div>
        </div>

        <!-- ä¼˜ç¼ºç‚¹åˆ†æ -->
        <div class="mt-6 grid grid-cols-1 md:grid-cols-2 gap-4">
            <div class="bg-green-50 border-l-4 border-green-500 p-4 rounded">
                <h4 class="font-semibold text-green-800 mb-2">âœ… ä¼˜ç‚¹</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                    <li>â€¢ è§£è€¦å¯¹è±¡çš„åˆ›å»ºå’Œä½¿ç”¨</li>
                    <li>â€¢ æ˜“äºæ‰©å±•æ–°çš„äº§å“ç±»å‹</li>
                    <li>â€¢ ç¬¦åˆå¼€é—­åŸåˆ™</li>
                    <li>â€¢ ä»£ç å¤ç”¨æ€§é«˜</li>
                </ul>
            </div>
            <div class="bg-orange-50 border-l-4 border-orange-500 p-4 rounded">
                <h4 class="font-semibold text-orange-800 mb-2">âš ï¸ ç¼ºç‚¹</h4>
                <ul class="text-sm text-gray-700 space-y-1">
                    <li>â€¢ å¢åŠ äº†ç³»ç»Ÿå¤æ‚åº¦</li>
                    <li>â€¢ éœ€è¦åˆ›å»ºæ›´å¤šçš„ç±»</li>
                    <li>â€¢ ç®€å•åœºæ™¯å¯èƒ½è¿‡åº¦è®¾è®¡</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<script>
// è¡¨å•ç”Ÿæˆæ¼”ç¤ºè„šæœ¬
function generateDemoForm() {
    // è¡¨å•å…ƒç´ åŸºç±»
    class FormElement {
        constructor(config) {
            this.label = config.label;
            this.name = config.name;
            this.required = config.required || false;
        }
    }

    // æ–‡æœ¬è¾“å…¥æ¡†
    class TextInput extends FormElement {
        constructor(config) {
            super(config);
            this.placeholder = config.placeholder || '';
        }

        render() {
            return `
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">
                        ${this.label}${this.required ? ' <span class="text-red-500">*</span>' : ''}
                    </label>
                    <input type="text"
                           name="${this.name}"
                           placeholder="${this.placeholder}"
                           class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                           ${this.required ? 'required' : ''} />
                </div>
            `;
        }
    }

    // ä¸‹æ‹‰é€‰æ‹©æ¡†
    class SelectInput extends FormElement {
        constructor(config) {
            super(config);
            this.options = config.options || [];
        }

        render() {
            const optionsHtml = this.options
                .map(opt => `<option value="${opt.value}">${opt.label}</option>`)
                .join('');

            return `
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">
                        ${this.label}${this.required ? ' <span class="text-red-500">*</span>' : ''}
                    </label>
                    <select name="${this.name}"
                            class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                            ${this.required ? 'required' : ''}>
                        <option value="">è¯·é€‰æ‹©</option>
                        ${optionsHtml}
                    </select>
                </div>
            `;
        }
    }

    // å•é€‰æŒ‰é’®ç»„
    class RadioInput extends FormElement {
        constructor(config) {
            super(config);
            this.options = config.options || [];
        }

        render() {
            const radiosHtml = this.options
                .map(opt => `
                    <label class="inline-flex items-center mr-6">
                        <input type="radio" name="${this.name}" value="${opt.value}"
                               class="mr-2 text-blue-600 focus:ring-blue-500" />
                        <span class="text-gray-700">${opt.label}</span>
                    </label>
                `).join('');

            return `
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">
                        ${this.label}${this.required ? ' <span class="text-red-500">*</span>' : ''}
                    </label>
                    <div class="flex flex-wrap">
                        ${radiosHtml}
                    </div>
                </div>
            `;
        }
    }

    // å¤šè¡Œæ–‡æœ¬æ¡†
    class TextareaInput extends FormElement {
        constructor(config) {
            super(config);
            this.rows = config.rows || 4;
            this.placeholder = config.placeholder || '';
        }

        render() {
            return `
                <div class="mb-4">
                    <label class="block text-gray-700 font-medium mb-2">
                        ${this.label}${this.required ? ' <span class="text-red-500">*</span>' : ''}
                    </label>
                    <textarea name="${this.name}"
                              rows="${this.rows}"
                              placeholder="${this.placeholder}"
                              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
                              ${this.required ? 'required' : ''}></textarea>
                </div>
            `;
        }
    }

    // è¡¨å•å…ƒç´ å·¥å‚
    class FormElementFactory {
        static createElement(type, config) {
            switch(type) {
                case 'text':
                    return new TextInput(config);
                case 'select':
                    return new SelectInput(config);
                case 'radio':
                    return new RadioInput(config);
                case 'textarea':
                    return new TextareaInput(config);
                default:
                    throw new Error(`ä¸æ”¯æŒçš„è¡¨å•å…ƒç´ ç±»å‹: ${type}`);
            }
        }

        static createForm(formConfig) {
            return formConfig.map(item =>
                this.createElement(item.type, item.config)
            );
        }
    }

    // è¡¨å•é…ç½®
    const formConfig = [
        {
            type: 'text',
            config: {
                label: 'ç”¨æˆ·å',
                name: 'username',
                placeholder: 'è¯·è¾“å…¥ç”¨æˆ·å',
                required: true
            }
        },
        {
            type: 'text',
            config: {
                label: 'é‚®ç®±',
                name: 'email',
                placeholder: 'è¯·è¾“å…¥é‚®ç®±åœ°å€',
                required: true
            }
        },
        {
            type: 'select',
            config: {
                label: 'æ‰€åœ¨åŸå¸‚',
                name: 'city',
                required: true,
                options: [
                    { value: 'beijing', label: 'åŒ—äº¬' },
                    { value: 'shanghai', label: 'ä¸Šæµ·' },
                    { value: 'guangzhou', label: 'å¹¿å·' },
                    { value: 'shenzhen', label: 'æ·±åœ³' }
                ]
            }
        },
        {
            type: 'radio',
            config: {
                label: 'æ€§åˆ«',
                name: 'gender',
                required: true,
                options: [
                    { value: 'male', label: 'ç”·' },
                    { value: 'female', label: 'å¥³' },
                    { value: 'other', label: 'å…¶ä»–' }
                ]
            }
        },
        {
            type: 'textarea',
            config: {
                label: 'ä¸ªäººç®€ä»‹',
                name: 'bio',
                placeholder: 'è¯·è¾“å…¥ä¸ªäººç®€ä»‹ï¼ˆé€‰å¡«ï¼‰',
                rows: 4
            }
        }
    ];

    // ç”Ÿæˆè¡¨å•
    const formElements = FormElementFactory.createForm(formConfig);
    const formHtml = `
        <h3 class="text-lg font-semibold mb-4 text-gray-800">ğŸ“ ç”¨æˆ·æ³¨å†Œè¡¨å•</h3>
        <form onsubmit="event.preventDefault(); alert('è¡¨å•æäº¤æˆåŠŸï¼è¿™æ˜¯ä¸€ä¸ªæ¼”ç¤ºã€‚');">
            ${formElements.map(element => element.render()).join('')}
            <button type="submit"
                    class="w-full px-6 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-lg font-medium hover:shadow-lg transition-all duration-200">
                æäº¤æ³¨å†Œ
            </button>
        </form>
    `;

    // æ˜¾ç¤ºè¡¨å•
    const formDemo = document.getElementById('formDemo');
    formDemo.innerHTML = formHtml;
    formDemo.style.display = 'block';

    // å¹³æ»‘æ»šåŠ¨åˆ°è¡¨å•
    formDemo.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
}
</script>
